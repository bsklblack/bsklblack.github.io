{"version":3,"sources":["webpack:///./src/api/category.js","webpack:///./src/views/page/category/category.vue?6c35","webpack:///src/views/page/category/category.vue","webpack:///./src/views/page/category/category.vue?566b","webpack:///./src/views/page/category/category.vue"],"names":["get","axs","add","params","post","edit","put","remove","id","delete","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","openModel","_v","columns","data","scopedSlots","_u","key","fn","text","record","_l","ic","i","staticStyle","_s","visible","modelState","handleOk","handleCancel","ref","form","rules","model","value","callback","$$v","$set","_n","expression","item","slot","addItem","c","removeItem","staticRenderFns","name","c_items","created","getCategory","methods","$refs","validate","valid","console","log","res","status","push","filter","index","length","component"],"mappings":"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","file":"js/chunk-595241e3.9da678ca.js","sourcesContent":["import axs from '@/axios';\n\nexport default {\n  // 获取类目列表\n  get() {\n    return axs.get('/category/all');\n  },\n  add(params) {\n    return axs.post('/category/add', params);\n  },\n  edit(params) {\n    return axs.put('/category/edit', params);\n  },\n  remove(id) {\n    return axs.delete(`/category/${id}`);\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"category-container\"},[_c('div',{staticClass:\"header\"},[_c('a-form-model',{attrs:{\"layout\":\"inline\"}},[_c('a-form-model-item',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openModel()}}},[_vm._v(\"增加\")])],1)],1)],1),_c('a-table',{attrs:{\"columns\":_vm.columns,\"data-source\":_vm.data},scopedSlots:_vm._u([{key:\"items\",fn:function(text,record){return _c('div',{},_vm._l((record.c_items),function(ic,i){return _c('span',{key:i,staticStyle:{\"padding\":\"5px\"}},[_vm._v(_vm._s(ic))])}),0)}},{key:\"control\",fn:function(text,record){return _c('div',{},[_c('a-button',{on:{\"click\":function($event){return _vm.openModel(record)}}},[_vm._v(\"编辑\")]),_c('a-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.remove(record)}}},[_vm._v(\"删除\")])],1)}}])}),_c('a-modal',{attrs:{\"title\":\"Title\",\"visible\":_vm.visible,\"cancelText\":\"取消\",\"okText\":_vm.modelState==0? '增加' : '编辑'},on:{\"ok\":_vm.handleOk,\"cancel\":_vm.handleCancel}},[_c('a-form-model',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('a-form-model-item',{attrs:{\"has-feedback\":\"\",\"label\":\"类目ID\",\"prop\":\"id\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.id),callback:function ($$v) {_vm.$set(_vm.form, \"id\", _vm._n($$v))},expression:\"form.id\"}})],1),_c('a-form-model-item',{attrs:{\"has-feedback\":\"\",\"label\":\"类目名称\",\"prop\":\"checkPass\"}},[_c('a-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('a-form-model-item',{attrs:{\"has-feedback\":\"\",\"label\":\"商品子类目\"}},[_c('a-input',{model:{value:(_vm.item),callback:function ($$v) {_vm.item=$$v},expression:\"item\"}},[_c('span',{attrs:{\"slot\":\"suffix\"},slot:\"suffix\"},[_c('a-icon',{attrs:{\"type\":\"plus-circle\"},on:{\"click\":_vm.addItem}})],1)]),_vm._l((_vm.form.c_items),function(c,i){return _c('span',{key:i,staticStyle:{\"border\":\"1px solid #ccc\",\"margin-right\":\"10px\",\"padding\":\"5px\",\"border-radius\":\"5px\"},on:{\"click\":function($event){return _vm.removeItem(i)}}},[_vm._v(_vm._s(c))])})],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"category-container\">\n    <div class=\"header\">\n      <a-form-model layout=\"inline\">\n        <a-form-model-item>\n          <a-button type=\"primary\" @click=\"openModel()\">增加</a-button>\n        </a-form-model-item>\n      </a-form-model>\n    </div>\n    <a-table :columns=\"columns\" :data-source=\"data\">\n      <div slot=\"items\" slot-scope=\"text,record\">\n        <span v-for=\"(ic ,i) in record.c_items\" :key=\"i\" style=\"padding:5px\">{{ic}}</span>\n      </div>\n      <div slot=\"control\" slot-scope=\"text,record\">\n        <a-button @click=\"openModel(record)\">编辑</a-button>\n        <a-button type=\"danger\" @click=\"remove(record)\">删除</a-button>\n      </div>\n    </a-table>\n    <a-modal\n      title=\"Title\"\n      :visible=\"visible\"\n      @ok=\"handleOk\"\n      @cancel=\"handleCancel\"\n      cancelText=\"取消\"\n      :okText=\"modelState==0? '增加' : '编辑'\"\n    >\n      <a-form-model ref=\"form\" :model=\"form\" :rules=\"rules\">\n        <a-form-model-item has-feedback label=\"类目ID\" prop=\"id\">\n          <a-input v-model.number=\"form.id\" disabled />\n        </a-form-model-item>\n        <a-form-model-item has-feedback label=\"类目名称\" prop=\"checkPass\">\n          <a-input v-model=\"form.name\" />\n        </a-form-model-item>\n        <a-form-model-item has-feedback label=\"商品子类目\">\n          <a-input v-model=\"item\">\n            <span slot=\"suffix\">\n              <a-icon type=\"plus-circle\" @click=\"addItem\" />\n            </span>\n          </a-input>\n          <span\n            style=\"border:1px solid #ccc;margin-right:10px;padding:5px;border-radius:5px\"\n            v-for=\"(c,i) in form.c_items\"\n            :key=\"i\"\n            @click=\"removeItem(i)\"\n          >{{c}}</span>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport categoryApi from \"@/api/category\";\nconst columns = [\n  {\n    dataIndex: \"id\",\n    key: \"id\",\n    title: \"id\",\n  },\n  {\n    title: \"类目名称\",\n    dataIndex: \"name\",\n    key: \"name\",\n  },\n  {\n    title: \"子类目\",\n    key: \"c_items\",\n    scopedSlots: { customRender: \"items\" },\n  },\n  {\n    title: \"操作\",\n    scopedSlots: { customRender: \"control\" },\n  },\n];\nexport default {\n  data() {\n    return {\n      data: [],\n      columns,\n      visible: false, // 弹框是否显示\n      modelState: 0, // 弹框状态0-增加，1-编辑\n      item: \"\",\n      form: {\n        id: \"\",\n        name: \"\",\n        c_items: [],\n      },\n      rules: {\n        id: [{ required: true, message: \"请填写类目ID\", trigger: \"blur\" }],\n        name: [{ required: true, message: \"请填写类目名称\", trigger: \"blur\" }],\n      },\n    };\n  },\n  created() {\n    this.getCategory();\n  },\n  methods: {\n    // 获取类目数据\n    async getCategory() {\n      const res = await categoryApi.get();\n      this.data = res.data.data.map((item) => {\n        item.key = item.id;\n        return item;\n      });\n    },\n    // 弹窗确定\n    handleOk() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          if (this.modelState == 0) {\n            categoryApi.add(this.form).then((res) => {\n              console.log(res);\n              if (res.status === \"success\") {\n                this.$message.success(\"新增成功\");\n              }\n              this.getCategory();\n            });\n          } else {\n            // 编辑\n            categoryApi.edit(this.form).then((res) => {\n              console.log(res);\n              if (res.status === \"success\") {\n                this.$message.success(\"编辑成功\");\n              }\n              this.getCategory();\n            });\n          }\n          this.visible = false;\n        }\n      });\n    },\n    // 取消\n    handleCancel() {\n      this.visible = false;\n    },\n    // 添加子类目\n    addItem() {\n      if (this.item !== \"\") {\n        this.form.c_items.push(this.item);\n        this.item = \"\";\n      }\n    },\n    // 删除子类目\n    removeItem(i) {\n      this.form.c_items = this.form.c_items.filter((item, index) => {\n        return index !== i;\n      });\n    },\n    openModel(item) {\n      if (item) {\n        // 编辑\n        this.form = {\n          ...item,\n        };\n        this.modelState = 1;\n      } else {\n        // 增加\n        this.form = {\n          id: this.data.length + 1, // 添加\n          name: \"\",\n          c_items: [],\n        };\n        this.modelState = 0;\n      }\n      this.visible = true;\n    },\n    // 删除子类目\n    async remove(category) {\n      const that = this;\n      this.$confirm({\n        title: \"是否删除'\" + category.name + \"'\",\n        onOk() {\n          categoryApi.remove(category.id).then((res) => {\n            if (res.status === \"success\") {\n              that.getCategory();\n              that.$message.success(\"删除成功\");\n            } else {\n              that.$message.error(res.message);\n            }\n          });\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category.vue?vue&type=template&id=c0f00506&\"\nimport script from \"./category.vue?vue&type=script&lang=js&\"\nexport * from \"./category.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}