(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-595241e3"],{c405:function(e,t,n){"use strict";var a=n("bb36");t["a"]={get:function(){return a["a"].get("/category/all")},add:function(e){return a["a"].post("/category/add",e)},edit:function(e){return a["a"].put("/category/edit",e)},remove:function(e){return a["a"].delete("/category/".concat(e))}}},dfe3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"category-container"},[n("div",{staticClass:"header"},[n("a-form-model",{attrs:{layout:"inline"}},[n("a-form-model-item",[n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.openModel()}}},[e._v("增加")])],1)],1)],1),n("a-table",{attrs:{columns:e.columns,"data-source":e.data},scopedSlots:e._u([{key:"items",fn:function(t,a){return n("div",{},e._l(a.c_items,(function(t,a){return n("span",{key:a,staticStyle:{padding:"5px"}},[e._v(e._s(t))])})),0)}},{key:"control",fn:function(t,a){return n("div",{},[n("a-button",{on:{click:function(t){return e.openModel(a)}}},[e._v("编辑")]),n("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.remove(a)}}},[e._v("删除")])],1)}}])}),n("a-modal",{attrs:{title:"Title",visible:e.visible,cancelText:"取消",okText:0==e.modelState?"增加":"编辑"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("a-form-model-item",{attrs:{"has-feedback":"",label:"类目ID",prop:"id"}},[n("a-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",e._n(t))},expression:"form.id"}})],1),n("a-form-model-item",{attrs:{"has-feedback":"",label:"类目名称",prop:"checkPass"}},[n("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("a-form-model-item",{attrs:{"has-feedback":"",label:"商品子类目"}},[n("a-input",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},[n("span",{attrs:{slot:"suffix"},slot:"suffix"},[n("a-icon",{attrs:{type:"plus-circle"},on:{click:e.addItem}})],1)]),e._l(e.form.c_items,(function(t,a){return n("span",{key:a,staticStyle:{border:"1px solid #ccc","margin-right":"10px",padding:"5px","border-radius":"5px"},on:{click:function(t){return e.removeItem(a)}}},[e._v(e._s(t))])}))],2)],1)],1)],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("96cf"),n("d81d"),n("4de4"),n("b0c0"),n("c405")),c=[{dataIndex:"id",key:"id",title:"id"},{title:"类目名称",dataIndex:"name",key:"name"},{title:"子类目",key:"c_items",scopedSlots:{customRender:"items"}},{title:"操作",scopedSlots:{customRender:"control"}}],u={data:function(){return{data:[],columns:c,visible:!1,modelState:0,item:"",form:{id:"",name:"",c_items:[]},rules:{id:[{required:!0,message:"请填写类目ID",trigger:"blur"}],name:[{required:!0,message:"请填写类目名称",trigger:"blur"}]}}},created:function(){this.getCategory()},methods:{getCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get();case 2:n=t.sent,e.data=n.data.data.map((function(e){return e.key=e.id,e}));case 4:case"end":return t.stop()}}),t)})))()},handleOk:function(){var e=this;this.$refs.form.validate((function(t){t&&(0==e.modelState?s["a"].add(e.form).then((function(t){console.log(t),"success"===t.status&&e.$message.success("新增成功"),e.getCategory()})):s["a"].edit(e.form).then((function(t){console.log(t),"success"===t.status&&e.$message.success("编辑成功"),e.getCategory()})),e.visible=!1)}))},handleCancel:function(){this.visible=!1},addItem:function(){""!==this.item&&(this.form.c_items.push(this.item),this.item="")},removeItem:function(e){this.form.c_items=this.form.c_items.filter((function(t,n){return n!==e}))},openModel:function(e){e?(this.form=Object(i["a"])({},e),this.modelState=1):(this.form={id:this.data.length+1,name:"",c_items:[]},this.modelState=0),this.visible=!0},remove:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t,t.$confirm({title:"是否删除'"+e.name+"'",onOk:function(){s["a"].remove(e.id).then((function(e){"success"===e.status?(a.getCategory(),a.$message.success("删除成功")):a.$message.error(e.message)}))}});case 2:case"end":return n.stop()}}),n)})))()}}},l=u,m=n("2877"),d=Object(m["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-595241e3.9da678ca.js.map